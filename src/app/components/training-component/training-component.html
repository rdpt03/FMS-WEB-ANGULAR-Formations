<div>
    <ng-container *ngIf="trainings$ | async as trainings; else loading">

        <h1 class="text-center">Liste des formations disponibles</h1>




        <!-- Search bar -->
        <div class="mb-3 mt-3 d-flex justify-content-center">
            <input 
                class="form-control w-50"
                type="search" 
                placeholder="Search" 
                aria-label="Search" 
                name="searchText"
                [(ngModel)]="searchText"
                (ngModelChange)="onSearchTextChange($event)">
        </div>

        <!-- Admin buttons -->
        <div *ngIf="this.adminConnected" class=" mb-3 mt-0 w-50 mx-auto mt-1 d-flex flex-wrap gap-2 justify-content-center align-items-center p-3 bg-light border rounded shadow-sm">
            <p class="mb-0 mt-0 me-3 fw-bold">Menu d'administrateur :</p>
            <button class="btn btn-primary btn-sm">Cr√©er une formation</button>
        </div>

        <!-- Grid of cards -->
        <div class="row g-3 justify-content-start"> <!-- Mudei justify-content-center para justify-content-start -->

            <div class="col-md-4 d-flex justify-content-center" *ngFor="let training of trainings">
                <div class="card h-100 shadow-sm" style="width:300px">
                    <!-- Image placeholder -->
                    <img src="{{ 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcScDPWPm0NYGMChKEtaqIvNM9_TeyvGfIOZjQ&s' }}" 
                        class="card-img-top" 
                        alt="{{ training.name }}" 
                        style="height: 150px; object-fit: cover;">

                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">{{ training.name }}</h5>
                        <p class="card-text text-truncate">{{ training.description }}</p>
                        <p class="card-text fw-bold">{{ training.price | currency:'EUR' }}</p>
                        
                        <!-- Quantity and button -->
                        <div class="d-flex align-items-center mt-auto">
                            <!--quantity-->
                            <input type="number" min="1" class="form-control form-control-sm me-2 text-center" 
                                    style="width: 70px;" [(ngModel)]="training.quantity">
                            <!--buy button-->
                            <button class="m-1 btn btn-success btn-sm flex-shrink-0" (click)="onAddToCart(training)">
                                <svg width="20px" height="20px" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" color="#ffffff"><path d="M19.5 22C20.3284 22 21 21.3284 21 20.5C21 19.6716 20.3284 19 19.5 19C18.6716 19 18 19.6716 18 20.5C18 21.3284 18.6716 22 19.5 22Z" fill="#ffffff" stroke="#ffffff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M9.5 22C10.3284 22 11 21.3284 11 20.5C11 19.6716 10.3284 19 9.5 19C8.67157 19 8 19.6716 8 20.5C8 21.3284 8.67157 22 9.5 22Z" fill="#ffffff" stroke="#ffffff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M5 4H22L20 15H7L5 4ZM5 4C4.83333 3.33333 4 2 2 2" stroke="#ffffff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M20 15H7H5.23077C3.44646 15 2.5 15.7812 2.5 17C2.5 18.2188 3.44646 19 5.23077 19H19.5" stroke="#ffffff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                            </button>
                            
                            <!--admin-zone-->
                            <!--edit-->
                            <button *ngIf="this.adminConnected" class="m-1 btn btn-warning btn-sm flex-shrink-0" (click)="onAddToCart(training)">
                                <svg width="20px" height="20px" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg" color="#000000"><path d="M20 12V5.74853C20 5.5894 19.9368 5.43679 19.8243 5.32426L16.6757 2.17574C16.5632 2.06321 16.4106 2 16.2515 2H4.6C4.26863 2 4 2.26863 4 2.6V21.4C4 21.7314 4.26863 22 4.6 22H11" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M8 10H16M8 6H12M8 14H11" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M17.9541 16.9394L18.9541 15.9394C19.392 15.5015 20.102 15.5015 20.5399 15.9394V15.9394C20.9778 16.3773 20.9778 17.0873 20.5399 17.5252L19.5399 18.5252M17.9541 16.9394L14.963 19.9305C14.8131 20.0804 14.7147 20.2741 14.6821 20.4835L14.4394 22.0399L15.9957 21.7973C16.2052 21.7646 16.3988 21.6662 16.5487 21.5163L19.5399 18.5252M17.9541 16.9394L19.5399 18.5252" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M16 2V5.4C16 5.73137 16.2686 6 16.6 6H20" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                            </button>
                            <!--delete-->
                            <button *ngIf="this.adminConnected" class="m-1 btn btn-danger btn-sm flex-shrink-0" (click)="onDeleteClick(training)">
                                <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" color="#ffffff" stroke-width="1.5"><path d="M20 9L18.005 20.3463C17.8369 21.3026 17.0062 22 16.0353 22H7.96474C6.99379 22 6.1631 21.3026 5.99496 20.3463L4 9" fill="#ffffff"></path><path d="M20 9L18.005 20.3463C17.8369 21.3026 17.0062 22 16.0353 22H7.96474C6.99379 22 6.1631 21.3026 5.99496 20.3463L4 9H20Z" stroke="#ffffff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M21 6H15.375M3 6H8.625M8.625 6V4C8.625 2.89543 9.52043 2 10.625 2H13.375C14.4796 2 15.375 2.89543 15.375 4V6M8.625 6H15.375" stroke="#ffffff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

        </div>

    </ng-container>
</div>

<ng-template #loading>
    <p class="text-center my-5">Carregando...</p>
</ng-template>
